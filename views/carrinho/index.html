<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Carrinho | xNeedWare</title>
<link rel="stylesheet" href="/css/style.css">
</head>
<body>
<h1>Seu Carrinho</h1>
<div id="carrinhoContainer"></div>
<p id="total"></p>
<a href="/pagamentos" class="cta-button">Finalizar Compra</a>

<script>
function atualizarCarrinho() {
    const carrinhoContainer = document.getElementById("carrinhoContainer");
    const totalEl = document.getElementById("total");
    const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
    
    if (carrinho.length === 0) {
        carrinhoContainer.innerHTML = "<p>O carrinho est√° vazio.</p>";
        totalEl.textContent = "";
        return;
    }

    carrinhoContainer.innerHTML = "";
    let total = 0;

    carrinho.forEach(item => {
        total += item.preco * item.quantidade;
        const div = document.createElement("div");
        div.innerHTML = `
            <strong>${item.nome}</strong> - R$ ${item.preco.toFixed(2)} x ${item.quantidade}
            <button class="remover-btn" data-id="${item.id}">Remover</button>
        `;
        carrinhoContainer.appendChild(div);
    });

    totalEl.textContent = `Total: R$ ${total.toFixed(2)}`;

    // Remover item
    const btns = document.querySelectorAll(".remover-btn");
    btns.forEach(btn => {
        btn.addEventListener("click", () => {
            const id = btn.dataset.id;
            const index = carrinho.findIndex(p => p.id === id);
            if (index > -1) {
                carrinho.splice(index, 1);
                localStorage.setItem("carrinho", JSON.stringify(carrinho));
                atualizarCarrinho();
            }
        });
    });
}

window.addEventListener("DOMContentLoaded", atualizarCarrinho);
</script>
</body>
</html>
